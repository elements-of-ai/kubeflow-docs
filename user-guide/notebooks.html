

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>Kubeflow Notebooks - Kubeflow Enterprise Docs</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.fa3fbbd75cfdd7cef.min.css" />
        <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#create-a-kubeflow-notebook" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Kubeflow Enterprise Docs" class="md-header__button md-logo" aria-label="Kubeflow Enterprise Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kubeflow Enterprise Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Kubeflow Notebooks
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/elements-of-ai/kubeflow-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Kubeflow Docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Kubeflow Enterprise Docs" class="md-nav__button md-logo" aria-label="Kubeflow Enterprise Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    Kubeflow Enterprise Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/elements-of-ai/kubeflow-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Kubeflow Docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/oss.html" class="md-nav__link">
        <span class="md-ellipsis">Open Source Kubeflow Components</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/ekf.html" class="md-nav__link">
        <span class="md-ellipsis">Kubeflow Enterprise Components and Features</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/mlops.html" class="md-nav__link">
        <span class="md-ellipsis">MLOps with Kubeflow</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5">
          <span class="md-ellipsis">Install</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Install" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Install</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/ubuntu.html" class="md-nav__link">
        <span class="md-ellipsis">Install Kubeflow on Nimbus</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6">
          <span class="md-ellipsis">Integration</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Integration</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/gitlab.html" class="md-nav__link">
        <span class="md-ellipsis">Git<wbr>Lab</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/identity.html" class="md-nav__link">
        <span class="md-ellipsis">Identity Providers <wbr>(OIDC)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/auth.html" class="md-nav__link">
        <span class="md-ellipsis">Auth<wbr>Service</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
        <label class="md-nav__link" for="__nav_7">
          <span class="md-ellipsis">User Guide</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">User Guide</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">Kubeflow Notebooks</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">Kubeflow Notebooks</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Kubeflow Notebooks</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-kubeflow-notebook" class="md-nav__link">
    <span class="md-ellipsis">Create a Kubeflow Notebook</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubeflow-notebook-volume" class="md-nav__link">
    <span class="md-ellipsis">Kubeflow Notebook Volume</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-a-kubeflow-notebook" class="md-nav__link">
    <span class="md-ellipsis">Delete a Kubeflow Notebook</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-images" class="md-nav__link">
    <span class="md-ellipsis">Container Images</span>
  </a>
  
    <nav class="md-nav" aria-label="Container Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provided-images" class="md-nav__link">
    <span class="md-ellipsis">Provided Images</span>
  </a>
  
    <nav class="md-nav" aria-label="Provided Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-images" class="md-nav__link">
    <span class="md-ellipsis">Base Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-images" class="md-nav__link">
    <span class="md-ellipsis">Full Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-dependency-chart" class="md-nav__link">
    <span class="md-ellipsis">Image Dependency Chart</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-images" class="md-nav__link">
    <span class="md-ellipsis">Custom Images</span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-packages" class="md-nav__link">
    <span class="md-ellipsis">Python Packages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-packages" class="md-nav__link">
    <span class="md-ellipsis">Linux Packages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s6" class="md-nav__link">
    <span class="md-ellipsis">S6</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-requirements" class="md-nav__link">
    <span class="md-ellipsis">Image requirements</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="feast.html" class="md-nav__link">
        <span class="md-ellipsis">Feast</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="spark.html" class="md-nav__link">
        <span class="md-ellipsis">Spark</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mlmd.html" class="md-nav__link">
        <span class="md-ellipsis">ML Metadata <wbr>(MLMD)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mlflow.html" class="md-nav__link">
        <span class="md-ellipsis">MLFlow</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="training.html" class="md-nav__link">
        <span class="md-ellipsis">ML Training</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorboard.html" class="md-nav__link">
        <span class="md-ellipsis">Tensor<wbr>Board</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="katib.html" class="md-nav__link">
        <span class="md-ellipsis">Hyperparameter Tuning</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kserve.html" class="md-nav__link">
        <span class="md-ellipsis">KServe</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kfp.html" class="md-nav__link">
        <span class="md-ellipsis">Kubeflow Pipelines</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        <label class="md-nav__link" for="__nav_8">
          <span class="md-ellipsis">Use Cases</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use Cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Use Cases</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-cases/helmet.html" class="md-nav__link">
        <span class="md-ellipsis">Helmet Detection</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9">
          <span class="md-ellipsis">Operation Guide</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Operation Guide</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../operation-guide/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      
      
        <label class="md-nav__link" for="__nav_10">
          <span class="md-ellipsis">Internals</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Internals" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Internals</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../internals/auth.html" class="md-nav__link">
        <span class="md-ellipsis">Authentication and Authorization</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">Kubeflow Notebooks</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#create-a-kubeflow-notebook" class="md-nav__link">
    <span class="md-ellipsis">Create a Kubeflow Notebook</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#kubeflow-notebook-volume" class="md-nav__link">
    <span class="md-ellipsis">Kubeflow Notebook Volume</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#delete-a-kubeflow-notebook" class="md-nav__link">
    <span class="md-ellipsis">Delete a Kubeflow Notebook</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#container-images" class="md-nav__link">
    <span class="md-ellipsis">Container Images</span>
  </a>
  
    <nav class="md-nav" aria-label="Container Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#provided-images" class="md-nav__link">
    <span class="md-ellipsis">Provided Images</span>
  </a>
  
    <nav class="md-nav" aria-label="Provided Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#base-images" class="md-nav__link">
    <span class="md-ellipsis">Base Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#full-images" class="md-nav__link">
    <span class="md-ellipsis">Full Images</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-dependency-chart" class="md-nav__link">
    <span class="md-ellipsis">Image Dependency Chart</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-images" class="md-nav__link">
    <span class="md-ellipsis">Custom Images</span>
  </a>
  
    <nav class="md-nav" aria-label="Custom Images">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#python-packages" class="md-nav__link">
    <span class="md-ellipsis">Python Packages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#linux-packages" class="md-nav__link">
    <span class="md-ellipsis">Linux Packages</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#s6" class="md-nav__link">
    <span class="md-ellipsis">S6</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#image-requirements" class="md-nav__link">
    <span class="md-ellipsis">Image requirements</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/elements-of-ai/kubeflow-docs/blob/master/docs/user-guide/notebooks.rst" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>

<h1 id="kubeflow-notebooks"><span id="user-guide-notebooks"></span>Kubeflow Notebooks<a class="headerlink" href="#kubeflow-notebooks" title="Permalink to this heading">¶</a></h1>
<p>Kubeflow Notebooks provides a way to run web-based development environments inside your Kubernetes cluster by running them inside Pods.</p>
<h2 id="create-a-kubeflow-notebook">Create a Kubeflow Notebook<a class="headerlink" href="#create-a-kubeflow-notebook" title="Permalink to this heading">¶</a></h2>
<p>The dashboard will give you an overview of the Notebook Servers currently available on your Kubeflow installation. In a freshly installed Kubeflow there will be no Notebook Server.
You will create a new Notebook Server by clicking on “Notebooks” in the left-side navigation and then clicking on the “New Notebook” button.</p>
<p>In the “New Notebook” section you will be able to specify several options for the notebook you are creating. In the image section choose an image of <code class="docutils literal notranslate"><span class="pre">jupyter-tensorflow-full</span></code>. It is required for our example notebook. (More details about container images used for Notebook Server are introduced in following sections.) Please leave the CPU and memory requirements to the default ones.</p>
<p>Once the Notebook Server is created, you connect to it by clicking on the “Connect” button from the left side to it and access your Jupyter Notebook environment which will be opened in a new tab.</p>
<img alt="../_images/notebook-1.png" src="../_images/notebook-1.png" />
<p>For testing the server we will upload the <a class="reference external" href="https://www.tensorflow.org/tutorials/quickstart/advanced">Tensorflow 2 quickstart for experts example</a>.</p>
<p>Click on the link above and click on the “Download Notebook” button just below the heading. This will download the file <code class="docutils literal notranslate"><span class="pre">advanced.ipynb</span></code> into your usual Download location. This file will be used to create the example notebook.</p>
<p>On the “Notebook Server” page, click on the “Upload” button, which is located in the side-bar at the top, and select the <code class="docutils literal notranslate"><span class="pre">advanced.ipnyb</span></code> file.</p>
<img alt="../_images/notebook-2.png" src="../_images/notebook-2.png" />
<p>Once uploaded, click on the notebook name to open a new tab with the notebook content.</p>
<img alt="../_images/notebook-3.png" src="../_images/notebook-3.png" />
<p>You can read through the content for a better understanding of what this notebook does. Click on the Run button “▶︎”  to execute each stage of the document, or click on the double-chevron “&gt;&gt;” to execute the entire document.</p>
<h2 id="kubeflow-notebook-volume">Kubeflow Notebook Volume<a class="headerlink" href="#kubeflow-notebook-volume" title="Permalink to this heading">¶</a></h2>
<p>In order to see the volume of the notebook that you just created in the previous step, please click on “Volumes” on the left side-bar. You will see a volume that has the same name as the notebook with <code class="docutils literal notranslate"><span class="pre">-volume</span></code> at the end.</p>
<img alt="../_images/notebook-4.png" src="../_images/notebook-4.png" />
<h2 id="delete-a-kubeflow-notebook">Delete a Kubeflow Notebook<a class="headerlink" href="#delete-a-kubeflow-notebook" title="Permalink to this heading">¶</a></h2>
<p>In order to delete a new notebook, you will click on “Notebooks” in the left-side navigation. Go to the notebook you want to delete, an click on the small trash bin icon situated alongside the notebook.</p>
<img alt="../_images/notebook-5.png" src="../_images/notebook-5.png" />
<p>A new window will appear on your screen. Click “Delete”.</p>
<img alt="../_images/notebook-6.png" src="../_images/notebook-6.png" />
<h2 id="container-images">Container Images<a class="headerlink" href="#container-images" title="Permalink to this heading">¶</a></h2>
<p>In above sections, we choose an image of <code class="docutils literal notranslate"><span class="pre">jupyter-tensorflow-full</span></code> when creating the Notebook Server. In this section, we will introduce you to
container images more in details.</p>
<p>Kubeflow Notebooks natively supports three types of notebooks: <a class="reference external" href="https://github.com/jupyterlab/jupyterlab">JupyterLab</a>,
<a class="reference external" href="https://github.com/rstudio/rstudio">RStudio</a>, and <a class="reference external" href="https://github.com/coder/code-server">Visual Studio Code (code-server)</a>. But any web-based IDE
should work. Notebook Servers run as containers inside a Kubernetes Pod, which means the type of IDE (and which packages are installed) is determined by
the Docker image you pick for your server.</p>
<h3 id="provided-images">Provided Images<a class="headerlink" href="#provided-images" title="Permalink to this heading">¶</a></h3>
<p>Kubeflow provides a number of <a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers">example container images</a> for you
to get started. The link guides you to a Git repo in which you can find the Dockerfile of each provided example container image.</p>
<h4 id="base-images">Base Images<a class="headerlink" href="#base-images" title="Permalink to this heading">¶</a></h4>
<p>These images provide a common starting point for Kubeflow notebook containers.</p>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dockerfile</p></th>
<th class="head"><p>Registry</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/base">base</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/base:{TAG}</p></td>
<td><p>common base iamge</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/codeserver">codeserver</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/codeserver:{TAG}</p></td>
<td><p>base code-server (Visual Studio Code) image</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter">jupyter</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter:{TAG}</p></td>
<td><p>base JupyterLab image</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/rstudio">rstudio</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/rstudio:{TAG}</p></td>
<td><p>base RStudio image</p></td>
</tr>
</tbody>
</table>
<h4 id="full-images">Full Images<a class="headerlink" href="#full-images" title="Permalink to this heading">¶</a></h4>
<p>These images extend the base images with common packages used by Data Scientists and ML Engineers.</p>
<table class="docutils data align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Dockerfile</p></th>
<th class="head"><p>Registry</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/codeserver-python">codeserver-python</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/codeserver-python:{TAG}</p></td>
<td><p>code-server (Visual Studio Code) + Conda Python</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-pytorch">jupyter-pytorch (CPU)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-pytorch:{TAG}</p></td>
<td><p>JupyterLab + PyTorch (CPU)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-pytorch">jupyter-pytorch (CUDA)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-pytorch-cuda:{TAG}</p></td>
<td><p>JupyterLab + PyTorch (CUDA)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-pytorch-full">jupyter-pytorch-full (CPU)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-pytorch-full:{TAG}</p></td>
<td><p>JupyterLab + PyTorch (CPU)  <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/jupyter-pytorch-full/requirements.txt">common</a> packages</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-pytorch-full">jupyter-pytorch-full (CUDA)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-pytorch-cuda-full:{TAG}</p></td>
<td><p>JupyterLab + PyTorch (CUDA) + <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/jupyter-pytorch-full/requirements.txt">common</a> packages</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-scipy">jupyter-scipy</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-scipy:{TAG}</p></td>
<td><p>JupyterLab + <a class="reference external" href="https://scipy.org/">SciPy</a> packages</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-tensorflow">jupyter-tensorflow (CPU)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-tensorflow:{TAG}</p></td>
<td><p>JupyterLab + TensorFlow (CPU)</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-tensorflow">jupyter-tensorflow (CUDA)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-tensorflow-cuda:{TAG}</p></td>
<td><p>JupyterLab + TensorFlow (CUDA)</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-tensorflow-full">jupyter-tensorflow-full (CPU)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-tensorflow-full:{TAG}</p></td>
<td><p>JupyterLab + TensorFlow (CPU) + <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/jupyter-tensorflow-full/requirements.txt">common</a> packages</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter-tensorflow-full">jupyter-tensorflow-full (CUDA)</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/jupyter-tensorflow-cuda-full:{TAG}</p></td>
<td><p>JupyterLab + TensorFlow (CUDA) + <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/jupyter-tensorflow-full/requirements.txt">common</a> packages</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/rstudio-tidyverse">rstudio-tidyverse</a></p></td>
<td><p>public.ecr.aws/j1r0q0g6/notebooks/notebook-servers/rstudio-tidyverse:{TAG}</p></td>
<td><p>RStudio + <a class="reference external" href="https://www.tidyverse.org/">Tidyverse</a> packages</p></td>
</tr>
</tbody>
</table>
<h4 id="image-dependency-chart">Image Dependency Chart<a class="headerlink" href="#image-dependency-chart" title="Permalink to this heading">¶</a></h4>
<p>This flow-chart shows how our notebook container images depend on each other.</p>
<blockquote>
<div><img alt="../_images/user-guide-notebooks-imageDependency.png" src="../_images/user-guide-notebooks-imageDependency.png" />
</div></blockquote>
<h3 id="custom-images">Custom Images<a class="headerlink" href="#custom-images" title="Permalink to this heading">¶</a></h3>
<p>Packages installed by users <strong>after spawning</strong> a Kubeflow Notebook will only last the lifetime of the pod (unless installed into a PVC-backed directory).</p>
<p>To ensure packages are preserved throughout Pod restarts, users will need to either:</p>
<ul class="simple">
<li><p>Build custom images that include them, <strong>or</strong></p></li>
<li><p>Ensure they are installed in a PVC-backed directory</p></li>
</ul>
<h4 id="python-packages">Python Packages<a class="headerlink" href="#python-packages" title="Permalink to this heading">¶</a></h4>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>A common cause of errors is users running <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">--user</span> <span class="pre">...</span></code>, causing the home-directory (which is backed by a PVC) to contain a different or
incompatible version of a package contained in <code class="docutils literal notranslate"><span class="pre">/opt/conda/...</span></code></p>
</div>
<p>Extend one of the base images and install any <code class="docutils literal notranslate"><span class="pre">pip</span></code> or <code class="docutils literal notranslate"><span class="pre">conda</span></code> packages your Kubeflow Notebook users are likely to need.</p>
<p>As a guide, look at <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/jupyter-pytorch-full/cpu.Dockerfile">jupyter-pytorch-full.cpu</a>
for a <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">...</span></code> example, and the <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/rstudio-tidyverse/Dockerfile">rstudio-tidyverse</a>
for <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">...</span></code>.</p>
<h4 id="linux-packages">Linux Packages<a class="headerlink" href="#linux-packages" title="Permalink to this heading">¶</a></h4>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Ensure you swap to <code class="docutils literal notranslate"><span class="pre">root</span></code> in the Dockerfile before running <code class="docutils literal notranslate"><span class="pre">apt-get</span></code>, and swap back to <code class="docutils literal notranslate"><span class="pre">jovyan</span></code> after.</p>
</div>
<p>Extend one of the base images and install any <code class="docutils literal notranslate"><span class="pre">apt-get</span></code> package your Kubeflow Notebook users are likely to need.</p>
<h4 id="s6">S6<a class="headerlink" href="#s6" title="Permalink to this heading">¶</a></h4>
<p>Some use-cases might require custom scripts to run during the startup of the Notebook Server container, or advanced users might want to add additional
services that run inside the container (for example, an Apache or NGINX web server). To make this easy, we use the <a class="reference external" href="https://github.com/just-containers/s6-overlay">s6-overlay</a>.</p>
<p>The <a class="reference external" href="https://github.com/just-containers/s6-overlay">s6-overlay</a> differs from other init systems like tini. While <code class="docutils literal notranslate"><span class="pre">tini</span></code> was created to handle a single
process running in a container as PID 1, the <code class="docutils literal notranslate"><span class="pre">s6-overlay</span></code> is built to manage multiple processes and allows the creator of the image to determine which
process failures should silently restart, and which should cause the container to exit.</p>
<p><strong>Scripts</strong></p>
<p>Scripts that need to run during the startup of the container can be placed in <code class="docutils literal notranslate"><span class="pre">/etc/cont-init.d/</span></code>, and are executed in ascending alphanumeric order.</p>
<p>An example of a startup script can be found in <a class="reference external" href="https://github.com/kubeflow/kubeflow/blob/master/components/example-notebook-servers/rstudio/s6/cont-init.d/02-rstudio-env-fix">./rstudio/s6/cont-init.d/02-rstudio-env-fix</a>.
This script uses the <a class="reference external" href="https://github.com/just-containers/s6-overlay#container-environment">with-contenv</a> helper so that environment variables (passed to
container) are available in the script. The purpose of this script is to snapshot any <code class="docutils literal notranslate"><span class="pre">KUBERNETES_*</span></code> environment variables into the <code class="docutils literal notranslate"><span class="pre">Renviron.site</span></code>
at pod startup, as without these variables <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> does not work.</p>
<p><strong>Services</strong></p>
<p>Extra services to be monitored by <code class="docutils literal notranslate"><span class="pre">s6-overlay</span></code> should be placed in their own folder under <code class="docutils literal notranslate"><span class="pre">/etc/services.d/</span></code> containing a script called <code class="docutils literal notranslate"><span class="pre">run</span></code> and
optionally a finishing script <code class="docutils literal notranslate"><span class="pre">finish</span></code>.</p>
<p>For more information about the <code class="docutils literal notranslate"><span class="pre">run</span></code> and <code class="docutils literal notranslate"><span class="pre">finish</span></code> scripts, please see the <a class="reference external" href="https://github.com/just-containers/s6-overlay#writing-a-service-script">s6-overlay documentation</a>.</p>
<p>An example of a service can be found in the <code class="docutils literal notranslate"><span class="pre">run</span></code> script of
<a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers/jupyter/s6/services.d/jupyterlab">jupyter/s6/services.d/jupyterlab</a>
which is used to start JupyterLab itself.</p>
<p><strong>Run as root</strong></p>
<div class="warning admonition">
<p class="admonition-title">Warning</p>
<p>Our example images run <code class="docutils literal notranslate"><span class="pre">s6-overlay</span></code> as <code class="docutils literal notranslate"><span class="pre">$NB_USER</span></code> (not <code class="docutils literal notranslate"><span class="pre">root</span></code>), meaning any files or scripts related to <code class="docutils literal notranslate"><span class="pre">s6-overlay</span></code> must be owned by the
<code class="docutils literal notranslate"><span class="pre">$NB_USER</span></code> user to successfully run</p>
</div>
<p>There may be cases when you need to run a service as root, to do this, you can change the Dockerfile to have <code class="docutils literal notranslate"><span class="pre">USER</span> <span class="pre">root</span></code> at the end, and then use
<code class="docutils literal notranslate"><span class="pre">s6-setuidgid</span></code> to run the user-facing services as <code class="docutils literal notranslate"><span class="pre">$NB_USER</span></code>.</p>
<p>For more information and troubleshooting, refer to <a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers#custom-images">custom images git repo</a>.</p>
<h4 id="image-requirements">Image requirements<a class="headerlink" href="#image-requirements" title="Permalink to this heading">¶</a></h4>
<p>For Kubeflow Notebooks to work with a container image, the image must:</p>
<ul class="simple">
<li><p>expose an HTTP interface on port <code class="docutils literal notranslate"><span class="pre">8888</span></code>:
* Kubeflow sets an environment variable <code class="docutils literal notranslate"><span class="pre">NB_PREFIX</span></code> at runtime with the URL path we expect the container be listening under
* Kubeflow uses IFrames, so ensure your application sets <code class="docutils literal notranslate"><span class="pre">Access-Control-Allow-Origin:</span> <span class="pre">*</span></code> in HTTP response headers</p></li>
<li><p>run as a user called <code class="docutils literal notranslate"><span class="pre">jovyan</span></code>:
* the home directory of <code class="docutils literal notranslate"><span class="pre">jovyan</span></code> should be <code class="docutils literal notranslate"><span class="pre">/home/jovyan</span></code>
* the UID of <code class="docutils literal notranslate"><span class="pre">jovyan</span></code> should be <code class="docutils literal notranslate"><span class="pre">1000</span></code></p></li>
<li><p>start successfully with an empty PVC mounted at <code class="docutils literal notranslate"><span class="pre">/home/jovyan</span></code>:
* Kubeflow mounts a PVC at <code class="docutils literal notranslate"><span class="pre">/home/jovyan</span></code> to keep state across Pod restarts</p></li>
</ul>
<div class="seealso admonition">
<p class="admonition-title">See also</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.arrikto.com/features/notebook-images.html#">Arrikto Kubeflow Notebooks</a></p></li>
<li><p><a class="reference external" href="https://charmed-kubeflow.io/docs/get-started-with-charmed-kubeflow#heading--kubeflow-notebooks">Get started with Charmed Kubeflow</a></p></li>
<li><p><a class="reference external" href="https://www.kubeflow.org/docs/components/notebooks/">Kubeflow Notebooks</a></p></li>
<li><p><a class="reference external" href="https://github.com/kubeflow/kubeflow/tree/master/components/example-notebook-servers">Example Notebook Servers</a></p></li>
<li><p><a class="reference external" href="https://www.kubeflow.org/docs/components/notebooks/container-images/">Container Images</a></p></li>
</ul>
</div>






                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="index.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Overview" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Overview
            </div>
          </div>
        </a>
      
      
        
        <a href="feast.html" class="md-footer__link md-footer__link--next" aria-label="Next: Feast" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Feast
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2023, Elements of AI.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    6.1.3.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "search.share"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.cea6a0c1d5b0618cf.min.js"></script>
    
  </body>
</html>