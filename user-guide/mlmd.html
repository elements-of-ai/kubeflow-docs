

<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../_static/favicon.ico">
    
    
      
        <title>ML Metadata (MLMD) - Kubeflow Enterprise Docs</title>
      
    
    
      
        
        
      
      

    
    
    
      
        
        
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
        <link rel="stylesheet" type="text/css" href="../_static/sphinx_immaterial_theme.fa3fbbd75cfdd7cef.min.css" />
        <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../index.html" title="Kubeflow Enterprise Docs" class="md-header__button md-logo" aria-label="Kubeflow Enterprise Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Kubeflow Enterprise Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              ML Metadata (MLMD)
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31Z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="yellow"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08Z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/elements-of-ai/kubeflow-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Kubeflow Docs
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../index.html" title="Kubeflow Enterprise Docs" class="md-nav__button md-logo" aria-label="Kubeflow Enterprise Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>
    </a>
    Kubeflow Enterprise Docs
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/elements-of-ai/kubeflow-docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    Kubeflow Docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/oss.html" class="md-nav__link">
        <span class="md-ellipsis">Open Source Kubeflow Components</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/ekf.html" class="md-nav__link">
        <span class="md-ellipsis">Kubeflow Enterprise Components and Features</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
  
    <li class="md-nav__item">
      <a href="../introduction/mlops.html" class="md-nav__link">
        <span class="md-ellipsis">MLOps with Kubeflow</span>
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5">
          <span class="md-ellipsis">Install</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Install" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Install</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../install/ubuntu.html" class="md-nav__link">
        <span class="md-ellipsis">Install Kubeflow on Nimbus</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" checked>
      
      
      
        <label class="md-nav__link" for="__nav_6">
          <span class="md-ellipsis">Integration</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Integration" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Integration</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/gitlab.html" class="md-nav__link">
        <span class="md-ellipsis">Git<wbr>Lab</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/identity.html" class="md-nav__link">
        <span class="md-ellipsis">Identity Providers <wbr>(OIDC)</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../integration/auth.html" class="md-nav__link">
        <span class="md-ellipsis">Auth<wbr>Service</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
        <label class="md-nav__link" for="__nav_7">
          <span class="md-ellipsis">User Guide</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">User Guide</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="notebooks.html" class="md-nav__link">
        <span class="md-ellipsis">Kubeflow Notebooks</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="feast.html" class="md-nav__link">
        <span class="md-ellipsis">Feast</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="spark.html" class="md-nav__link">
        <span class="md-ellipsis">Spark</span>
      </a>
    </li>
  

            
          
            
              
  
  
    
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          <span class="md-ellipsis">ML Metadata <wbr>(MLMD)</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="#" class="md-nav__link md-nav__link--active">
        <span class="md-ellipsis">ML Metadata <wbr>(MLMD)</span>
      </a>
      
        

  

<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">ML Metadata <wbr>(MLMD)</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-store" class="md-nav__link">
    <span class="md-ellipsis">Metadata Store</span>
  </a>
  
    <nav class="md-nav" aria-label="Metadata Store">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-metadata-store" class="md-nav__link">
    <span class="md-ellipsis">What is Metadata Store?</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-backends-and-store-connection-configuration" class="md-nav__link">
    <span title="storage backends and store connection configuration (reference label)" class="md-ellipsis">Storage backends and store connection configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Storage backends and store connection configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fake-database" class="md-nav__link">
    <span class="md-ellipsis">Fake Database</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlite" class="md-nav__link">
    <span class="md-ellipsis">SQLite</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">My<wbr>SQL</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-model" class="md-nav__link">
    <span class="md-ellipsis">Data model</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    <span class="md-ellipsis">Functionality</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrate-mlmd-with-ml-workflow" class="md-nav__link">
    <span class="md-ellipsis">Integrate MLMD with ML workflow</span>
  </a>
  
    <nav class="md-nav" aria-label="Integrate MLMD with ML workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overall-workflow" class="md-nav__link">
    <span title="overall workflow (reference label)" class="md-ellipsis">Overall workflow</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-0-1-install-mlmd" class="md-nav__link">
    <span class="md-ellipsis">Step 0.<wbr>1:<wbr> Install MLMD</span>
  </a>
  
    <nav class="md-nav" aria-label="Step 0.1: Install MLMD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-from-pypi" class="md-nav__link">
    <span class="md-ellipsis">Installing from Py<wbr>PI</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-with-docker" class="md-nav__link">
    <span class="md-ellipsis">Installing with Docker</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-from-source" class="md-nav__link">
    <span class="md-ellipsis">Installing from source</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-0-2-configure-store-connection" class="md-nav__link">
    <span class="md-ellipsis">Step 0.<wbr>2:<wbr> Configure store connection</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-register-artifact-types" class="md-nav__link">
    <span class="md-ellipsis">Step 1:<wbr> Register artifact types</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-register-execution-types" class="md-nav__link">
    <span class="md-ellipsis">Step 2:<wbr> Register execution types</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-dataset-artifact" class="md-nav__link">
    <span class="md-ellipsis">Step 3:<wbr> Create dataset artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-create-execution-for-trainer" class="md-nav__link">
    <span class="md-ellipsis">Step 4:<wbr> Create execution for trainer</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-read-dataset-and-record-input-event" class="md-nav__link">
    <span class="md-ellipsis">Step 5:<wbr> Read Dataset and record input event</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-train-model-and-create-saved-model-artifact" class="md-nav__link">
    <span class="md-ellipsis">Step 6:<wbr> Train model and create saved model artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-write-saved-model-and-record-output-event" class="md-nav__link">
    <span class="md-ellipsis">Step 7:<wbr> Write saved model and record output event</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-mark-execution-completed" class="md-nav__link">
    <span class="md-ellipsis">Step 8:<wbr> Mark execution completed</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-9-annote-the-experiment-with-a-context" class="md-nav__link">
    <span class="md-ellipsis">Step 9:<wbr> Annote the experiment with a context</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="mlflow.html" class="md-nav__link">
        <span class="md-ellipsis">MLFlow</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="training.html" class="md-nav__link">
        <span class="md-ellipsis">ML Training</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="tensorboard.html" class="md-nav__link">
        <span class="md-ellipsis">Tensor<wbr>Board</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="katib.html" class="md-nav__link">
        <span class="md-ellipsis">Hyperparameter Tuning</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kserve.html" class="md-nav__link">
        <span class="md-ellipsis">KServe</span>
      </a>
    </li>
  

            
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="kfp.html" class="md-nav__link">
        <span class="md-ellipsis">Kubeflow Pipelines</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        <label class="md-nav__link" for="__nav_8">
          <span class="md-ellipsis">Use Cases</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Use Cases" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Use Cases</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../use-cases/helmet.html" class="md-nav__link">
        <span class="md-ellipsis">Helmet Detection</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" checked>
      
      
      
        <label class="md-nav__link" for="__nav_9">
          <span class="md-ellipsis">Operation Guide</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Operation Guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Operation Guide</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../operation-guide/index.html" class="md-nav__link">
        <span class="md-ellipsis">Overview</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" checked>
      
      
      
        <label class="md-nav__link" for="__nav_10">
          <span class="md-ellipsis">Internals</span>
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Internals" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          <span class="md-ellipsis">Internals</span>
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
  
    <li class="md-nav__item">
      <a href="../internals/auth.html" class="md-nav__link">
        <span class="md-ellipsis">Authentication and Authorization</span>
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  

<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      <span class="md-ellipsis">ML Metadata <wbr>(MLMD)</span>
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">Overview</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#metadata-store" class="md-nav__link">
    <span class="md-ellipsis">Metadata Store</span>
  </a>
  
    <nav class="md-nav" aria-label="Metadata Store">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-is-metadata-store" class="md-nav__link">
    <span class="md-ellipsis">What is Metadata Store?</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#storage-backends-and-store-connection-configuration" class="md-nav__link">
    <span title="storage backends and store connection configuration (reference label)" class="md-ellipsis">Storage backends and store connection configuration</span>
  </a>
  
    <nav class="md-nav" aria-label="Storage backends and store connection configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#fake-database" class="md-nav__link">
    <span class="md-ellipsis">Fake Database</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#sqlite" class="md-nav__link">
    <span class="md-ellipsis">SQLite</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mysql" class="md-nav__link">
    <span class="md-ellipsis">My<wbr>SQL</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#data-model" class="md-nav__link">
    <span class="md-ellipsis">Data model</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functionality" class="md-nav__link">
    <span class="md-ellipsis">Functionality</span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#integrate-mlmd-with-ml-workflow" class="md-nav__link">
    <span class="md-ellipsis">Integrate MLMD with ML workflow</span>
  </a>
  
    <nav class="md-nav" aria-label="Integrate MLMD with ML workflow">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#overall-workflow" class="md-nav__link">
    <span title="overall workflow (reference label)" class="md-ellipsis">Overall workflow</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-0-1-install-mlmd" class="md-nav__link">
    <span class="md-ellipsis">Step 0.<wbr>1:<wbr> Install MLMD</span>
  </a>
  
    <nav class="md-nav" aria-label="Step 0.1: Install MLMD">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#installing-from-pypi" class="md-nav__link">
    <span class="md-ellipsis">Installing from Py<wbr>PI</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-with-docker" class="md-nav__link">
    <span class="md-ellipsis">Installing with Docker</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#installing-from-source" class="md-nav__link">
    <span class="md-ellipsis">Installing from source</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-0-2-configure-store-connection" class="md-nav__link">
    <span class="md-ellipsis">Step 0.<wbr>2:<wbr> Configure store connection</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-1-register-artifact-types" class="md-nav__link">
    <span class="md-ellipsis">Step 1:<wbr> Register artifact types</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-2-register-execution-types" class="md-nav__link">
    <span class="md-ellipsis">Step 2:<wbr> Register execution types</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-3-create-dataset-artifact" class="md-nav__link">
    <span class="md-ellipsis">Step 3:<wbr> Create dataset artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-4-create-execution-for-trainer" class="md-nav__link">
    <span class="md-ellipsis">Step 4:<wbr> Create execution for trainer</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-5-read-dataset-and-record-input-event" class="md-nav__link">
    <span class="md-ellipsis">Step 5:<wbr> Read Dataset and record input event</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-6-train-model-and-create-saved-model-artifact" class="md-nav__link">
    <span class="md-ellipsis">Step 6:<wbr> Train model and create saved model artifact</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-7-write-saved-model-and-record-output-event" class="md-nav__link">
    <span class="md-ellipsis">Step 7:<wbr> Write saved model and record output event</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-8-mark-execution-completed" class="md-nav__link">
    <span class="md-ellipsis">Step 8:<wbr> Mark execution completed</span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#step-9-annote-the-experiment-with-a-context" class="md-nav__link">
    <span class="md-ellipsis">Step 9:<wbr> Annote the experiment with a context</span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset" role="main">
                  


  <a href="https://github.com/elements-of-ai/kubeflow-docs/blob/master/docs/user-guide/mlmd.rst" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>

<h1 id="ml-metadata-mlmd">ML Metadata (MLMD)<a class="headerlink" href="#ml-metadata-mlmd" title="Permalink to this heading">¶</a></h1>
<h2 id="overview">Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>Metadata is the data that includes information about the context of other data and is generated in each phase of the ML lifecycle.
From the data extraction to the model monitoring phase, all ML-related processes create specific metadata. For example, the
initial part of the ML lifecycle includes metadata regarding the location, name, and version of the dataset; the model training
phase includes metadata regarding hyperparameters and evaluation metrics.</p>
<p><a class="reference external" href="https://github.com/google/ml-metadata">ML Metadata (MLMD)</a> is a library for recording and retrieving metadata associated with
ML developer and data scientist workflows. MLMD is an integral part of <a class="reference external" href="https://www.tensorflow.org/tfx">TensorFlow Extended (TFX)</a>,
but is designed so that it can be used independently.</p>
<p>Every run of a production ML pipeline generates metadata containing information about the various pipeline components, their
executions (e.g. training runs), and resulting artifacts (e.g. trained models). In the event of unexpected pipeline behavior or
errors, this metadata can be leveraged to analyze the lineage of pipeline components and debug issues. Think of this metadata as
the equivalent of logs in software development.</p>
<p>MLMD helps you understand and analyze all the interconnected parts of your ML pipeline instead of analyzing them in isolation and
can help you answer questions about your ML pipeline such as:</p>
<ul class="simple">
<li><p>Which dataset did the model train on?</p></li>
<li><p>What were the hyperparameters used to train the model?</p></li>
<li><p>Which pipeline run created the model?</p></li>
<li><p>Which training run led to this model?</p></li>
<li><p>When was the failed model pushed?</p></li>
</ul>
<p>Below graphic shows a high-level overview of the various components that are part of MLMD.</p>
<blockquote>
<div><img alt="../_images/user-guide-mlmd-overview.png" src="../_images/user-guide-mlmd-overview.png" />
</div></blockquote>
<h2 id="metadata-store">Metadata Store<a class="headerlink" href="#metadata-store" title="Permalink to this heading">¶</a></h2>
<h3 id="what-is-metadata-store">What is Metadata Store?<a class="headerlink" href="#what-is-metadata-store" title="Permalink to this heading">¶</a></h3>
<p>An ML metadata store is a centralized structure for storing the metadata of ML models. MLMD registers the following types of
metadata in the Metadata Store database:</p>
<ul class="simple">
<li><p>Metadata about the artifacts generated through the components/steps of your ML pipelines</p></li>
<li><p>Metadata about the executions of these components/steps</p></li>
<li><p>Metadata about pipelines and associated lineage information</p></li>
</ul>
<p>The Metadata Store provides APIs to record and retrieve metadata to and from the storage backend. The storage backend is pluggable
and can be extended. MLMD provides reference implementations for SQLite (which supports in-memory and disk) and MySQL out of the
box.</p>
<h3 id="storage-backends-and-store-connection-configuration"><span id="id1"></span>Storage backends and store connection configuration<a class="headerlink" href="#storage-backends-and-store-connection-configuration" title="Permalink to this heading">¶</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">MetadataStore</span></code> object receives a connection configuration that corresponds to the storage backend used.</p>
<h4 id="fake-database">Fake Database<a class="headerlink" href="#fake-database" title="Permalink to this heading">¶</a></h4>
<p>Fake Database provides an in-memory DB (using SQLite) for fast experimentation and local runs. The database is deleted when
the store object is destroyed.</p>
<h4 id="sqlite">SQLite<a class="headerlink" href="#sqlite" title="Permalink to this heading">¶</a></h4>
<p>SQLite reads and writes files from disk.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ml_metadata</span> <span class="kn">import</span> <span class="n">metadata_store</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span>

<span class="n">connection_config</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ConnectionConfig</span><span class="p">()</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">sqlite</span><span class="o">.</span><span class="n">filename_uri</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">sqlite</span><span class="o">.</span><span class="n">connection_mode</span> <span class="o">=</span> <span class="mi">3</span> <span class="c1"># READWRITE_OPENCREATE</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">metadata_store</span><span class="o">.</span><span class="n">MetadataStore</span><span class="p">(</span><span class="n">connection_config</span><span class="p">)</span>
</code></pre></div>
</div>
<h4 id="mysql">MySQL<a class="headerlink" href="#mysql" title="Permalink to this heading">¶</a></h4>
<p>MySQL connects to a MySQL server.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ml_metadata</span> <span class="kn">import</span> <span class="n">metadata_store</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span>

<span class="n">connection_config</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ConnectionConfig</span><span class="p">()</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">host</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">port</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">database</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">user</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">password</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">metadata_store</span><span class="o">.</span><span class="n">MetadataStore</span><span class="p">(</span><span class="n">connection_config</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Similarly, when using a MySQL instance with Google CloudSQL (<a class="reference external" href="https://cloud.google.com/sql/docs/mysql/quickstart">quickstart</a>,
<a class="reference external" href="https://cloud.google.com/sql/docs/mysql/connect-overview">connect-overview</a>), one could also use SSL option if applicable.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">ssl_options</span><span class="o">.</span><span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">ssl_options</span><span class="o">.</span><span class="n">cert</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">ssl_options</span><span class="o">.</span><span class="n">ca</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">ssl_options</span><span class="o">.</span><span class="n">capath</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">ssl_options</span><span class="o">.</span><span class="n">cipher</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">mysql</span><span class="o">.</span><span class="n">ssl_options</span><span class="o">.</span><span class="n">verify_server_cert</span> <span class="o">=</span> <span class="s1">&#39;...&#39;</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">metadata_store</span><span class="o">.</span><span class="n">MetadataStore</span><span class="p">(</span><span class="n">connection_config</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="data-model">Data model<a class="headerlink" href="#data-model" title="Permalink to this heading">¶</a></h2>
<p>The Metadata Store uses the following data model to record and retrieve metadata from the storage backend.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code> describes an artifact’s type and its properties that are stored in the metadata store. You can register these types on-the-fly with the metadata store in code, or you can load them in the store from a serialized format. Once you register a type, its definition is available throughout the lifetime of the store.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> describes a specific instance of an <code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code>, and its properties that are written to the metadata store.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">ExecutionType</span></code> describes a type of component or step in a workflow, and its runtime parameters.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Execution</span></code> is a record of a component run or a step in an ML workflow and the runtime parameters. An <code class="docutils literal notranslate"><span class="pre">Execution</span></code> can be thought of as an instance of an <code class="docutils literal notranslate"><span class="pre">ExecutionType</span></code>. Executions are recorded when you run an ML pipeline or step.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Event</span></code> is a record of the relationship between <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> and <code class="docutils literal notranslate"><span class="pre">Execution</span></code>. When an execution happens, events record every artifact that was used by the execution, and every artifact that was produced. These records allow for lineage tracking throughout a workflow. By looking at all <code class="docutils literal notranslate"><span class="pre">Event``s,</span> <span class="pre">MLMD</span> <span class="pre">knows</span> <span class="pre">what</span> <span class="pre">``Execution``s</span> <span class="pre">happened</span> <span class="pre">and</span> <span class="pre">what</span> <span class="pre">``Artifact``s</span> <span class="pre">were</span> <span class="pre">created</span> <span class="pre">as</span> <span class="pre">a</span> <span class="pre">result.</span> <span class="pre">MLMD</span> <span class="pre">can</span> <span class="pre">then</span> <span class="pre">recurse</span> <span class="pre">back</span> <span class="pre">from</span> <span class="pre">any</span> <span class="pre">``Artifact</span></code> to all of its upstream inputs.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">ContextType</span></code> describes a type of conceptual group of <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> and <code class="docutils literal notranslate"><span class="pre">Execution</span></code> in a workflow, and its structural properties. For example: projects, pipeline runs, experiments, owners, etc.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">Context</span></code> is an instance of a <code class="docutils literal notranslate"><span class="pre">ContextType</span></code>. It captures the shared information within the group. For example: project name, changelist commit id, experiment annotations, etc. It has a user-defined <strong>unique</strong> name within its <code class="docutils literal notranslate"><span class="pre">ContextType</span></code>.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Attribution</span></code> is a record of the relationship between <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> and <code class="docutils literal notranslate"><span class="pre">Context</span></code>.</p></li>
<li><p>An <code class="docutils literal notranslate"><span class="pre">Association</span></code> is a record of the relationship between <code class="docutils literal notranslate"><span class="pre">Execution</span></code> and <code class="docutils literal notranslate"><span class="pre">Context</span></code>.</p></li>
</ul>
<p>You may understand an <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> as a concrete object that is produced by an <code class="docutils literal notranslate"><span class="pre">Execution</span></code>. For example, a model is an
<code class="docutils literal notranslate"><span class="pre">Artifact</span></code> that is produced from an <code class="docutils literal notranslate"><span class="pre">Execution</span></code> of training step. The <code class="docutils literal notranslate"><span class="pre">Context</span></code> can be then considered as the whole run that
encapsulates the experiment. And whenever a step (i.e. <code class="docutils literal notranslate"><span class="pre">Execution</span></code>) produces an <code class="docutils literal notranslate"><span class="pre">Artifact</span></code>, we can say that it emits an <code class="docutils literal notranslate"><span class="pre">Event</span></code>, which binds an
<code class="docutils literal notranslate"><span class="pre">Artifact</span></code> and an <code class="docutils literal notranslate"><span class="pre">Execution</span></code> together. Finally, an <code class="docutils literal notranslate"><span class="pre">Attribution</span></code> connects an <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> with a <code class="docutils literal notranslate"><span class="pre">Context</span></code>, and an
<code class="docutils literal notranslate"><span class="pre">Association</span></code> connects an <code class="docutils literal notranslate"><span class="pre">Execution</span></code> with a <code class="docutils literal notranslate"><span class="pre">Context</span></code>.</p>
<p>To summarize,
* An <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> (a model) is produced by an <code class="docutils literal notranslate"><span class="pre">Execution</span></code> (a workflow step) and they are bonded together by an <code class="docutils literal notranslate"><span class="pre">Event</span></code>;
* An <code class="docutils literal notranslate"><span class="pre">Execution</span></code> (a workflow step) is part of a <code class="docutils literal notranslate"><span class="pre">Context</span></code> (an experiment) and they are bonded together by an <code class="docutils literal notranslate"><span class="pre">Association</span></code>;
* A <code class="docutils literal notranslate"><span class="pre">Context</span></code> (an experiment) generats an <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> (a model) and they are bonded together by an <code class="docutils literal notranslate"><span class="pre">Attribution</span></code>.</p>
<h2 id="functionality">Functionality<a class="headerlink" href="#functionality" title="Permalink to this heading">¶</a></h2>
<p>Tracking the inputs and outputs of all components/steps in an ML workflow and their lineage allows ML platforms to enable several
important features. The following list provides a non-exhaustive overview of some of the major benefits.</p>
<ul class="simple">
<li><p>List all Artifacts of a specific type, such as all models that have been trained.</p></li>
<li><p>Show a directed acylic graph (DAG) of all related executions and their input and output artifacts of a context, such as a visualization of the workflow of an experiment for debugging and discovery.</p></li>
<li><p>Recurse back through all events to see how an artifact was created.</p></li>
<li><p>Record and query context of workflow runs, such as tracking the owner and changelist used for a workflow run and grouping the lineage by experiments.</p></li>
</ul>
<h2 id="integrate-mlmd-with-ml-workflow">Integrate MLMD with ML workflow<a class="headerlink" href="#integrate-mlmd-with-ml-workflow" title="Permalink to this heading">¶</a></h2>
<h3 id="overall-workflow"><span id="id2"></span>Overall workflow<a class="headerlink" href="#overall-workflow" title="Permalink to this heading">¶</a></h3>
<p>Now, it’s time for us to strenthen the understanding of MLMD usage by going through an example. We here provide you with a typical
ML workflow and and will show you how to use the low-level MLMD APIs to track the execution of a training task.</p>
<p>Following graph shows the overall workflow.</p>
<blockquote>
<div><img alt="../_images/user-guide-mlmd-workflow.png" src="../_images/user-guide-mlmd-workflow.png" />
</div></blockquote>
<p>This exmaple simply represents a workflow that uses a <em>dataset</em> (<code class="docutils literal notranslate"><span class="pre">Artifact</span></code>) to <em>train</em> (<code class="docutils literal notranslate"><span class="pre">Execution</span></code>) a <em>model</em> (<code class="docutils literal notranslate"><span class="pre">Artifact</span></code>).</p>
<h3 id="step-0-1-install-mlmd">Step 0.1: Install MLMD<a class="headerlink" href="#step-0-1-install-mlmd" title="Permalink to this heading">¶</a></h3>
<p>We start from install MLMD library</p>
<h4 id="installing-from-pypi">Installing from PyPI<a class="headerlink" href="#installing-from-pypi" title="Permalink to this heading">¶</a></h4>
<p>The recommended way to install ML Metadata is to use the <a class="reference external" href="https://pypi.org/project/ml-metadata/">PyPI package</a>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>ml-metadata
</code></pre></div>
</div>
<p>Then import the relevant packages:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ml_metadata</span> <span class="kn">import</span> <span class="n">metadata_store</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span>
</code></pre></div>
</div>
<h4 id="installing-with-docker">Installing with Docker<a class="headerlink" href="#installing-with-docker" title="Permalink to this heading">¶</a></h4>
<p>This is the recommended way to build ML Metadata under Linux.</p>
<p>Please first install <code class="docutils literal notranslate"><span class="pre">docker</span></code> and <code class="docutils literal notranslate"><span class="pre">docker-compose</span></code> by following the directions: <a class="reference external" href="https://docs.docker.com/get-docker/">docker</a>;
<a class="reference external" href="https://docs.docker.com/compose/install/">docker-compose</a>.</p>
<p>Then, run the following at the project root:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><code><span class="nv">DOCKER_SERVICE</span><span class="o">=</span>manylinux-python<span class="si">${</span><span class="nv">PY_VERSION</span><span class="si">}</span>
sudo<span class="w"> </span>docker-compose<span class="w"> </span>build<span class="w"> </span><span class="si">${</span><span class="nv">DOCKER_SERVICE</span><span class="si">}</span>
sudo<span class="w"> </span>docker-compose<span class="w"> </span>run<span class="w"> </span><span class="si">${</span><span class="nv">DOCKER_SERVICE</span><span class="si">}</span>
</code></pre></div>
</div>
<p>where <code class="docutils literal notranslate"><span class="pre">PY_VERSION</span></code> is one of <code class="docutils literal notranslate"><span class="pre">{37,</span> <span class="pre">38,</span> <span class="pre">39}</span></code>.</p>
<p>A wheel will be produced under <code class="docutils literal notranslate"><span class="pre">dist/</span></code>, and installed as follows:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>dist/*.whl
</code></pre></div>
</div>
<h4 id="installing-from-source">Installing from source<a class="headerlink" href="#installing-from-source" title="Permalink to this heading">¶</a></h4>
<p>If you prefer to installing MLMD from source, refer to <a class="reference external" href="https://github.com/google/ml-metadata#installing-from-source">its github</a>
for detailed instruction.</p>
<h3 id="step-0-2-configure-store-connection">Step 0.2: Configure store connection<a class="headerlink" href="#step-0-2-configure-store-connection" title="Permalink to this heading">¶</a></h3>
<p>After installing and importing MLMD, we need to configure the store connection following instructions in
section <a class="reference internal" href="#storage-backends-and-store-connection-configuration"><span class="std std-ref">Storage backends and store connection configuration</span></a>.</p>
<p>In this guide, we would install and import MLMD using PyPI, and use Fake Database for simplicity and convinience.</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>!pip install ml-metadata
</code></pre></div>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">ml_metadata</span> <span class="kn">import</span> <span class="n">metadata_store</span>
<span class="kn">from</span> <span class="nn">ml_metadata.proto</span> <span class="kn">import</span> <span class="n">metadata_store_pb2</span>

<span class="n">connection_config</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ConnectionConfig</span><span class="p">()</span>
<span class="n">connection_config</span><span class="o">.</span><span class="n">fake_database</span><span class="o">.</span><span class="n">SetInParent</span><span class="p">()</span> <span class="c1"># Sets an empty fake database proto.</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">metadata_store</span><span class="o">.</span><span class="n">MetadataStore</span><span class="p">(</span><span class="n">connection_config</span><span class="p">)</span>
</code></pre></div>
</div>
<h3 id="step-1-register-artifact-types"><span id="step-1"></span>Step 1: Register artifact types<a class="headerlink" href="#step-1-register-artifact-types" title="Permalink to this heading">¶</a></h3>
<p>We start from registering artifact types. You may see from the graph of the <a class="reference internal" href="#overall-workflow"><span class="std std-ref">Overall workflow</span></a>, we have two <code class="docutils literal notranslate"><span class="pre">Artifact</span></code>, and
therefore need to register two <code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code>.</p>
<p>Register <code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code> for dataset:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">data_type</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ArtifactType</span><span class="p">()</span>
<span class="n">data_type</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;DataSet&quot;</span>
<span class="n">data_type</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">INT</span>
<span class="n">data_type</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;split&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">STRING</span>
<span class="n">data_type_id</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_artifact_type</span><span class="p">(</span><span class="n">data_type</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Register <code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code> for saved model:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">model_type</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ArtifactType</span><span class="p">()</span>
<span class="n">model_type</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;SavedModel&quot;</span>
<span class="n">model_type</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">INT</span>
<span class="n">model_type</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">STRING</span>
<span class="n">model_type_id</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_artifact_type</span><span class="p">(</span><span class="n">model_type</span><span class="p">)</span>
</code></pre></div>
</div>
<p>To see your registered <code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code>,</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">artifact_types</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifact_types</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">artifact_types</span><span class="p">)</span>
</code></pre></div>
</div>
<p>and you should see outputs like below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>[id: 10
name: &quot;DataSet&quot;
properties {
key: &quot;day&quot;
value: INT
}
properties {
key: &quot;split&quot;
value: STRING
}
, id: 11
name: &quot;SavedModel&quot;
properties {
key: &quot;name&quot;
value: STRING
}
properties {
key: &quot;version&quot;
value: INT
}
]
</code></pre></div>
</div>
<h3 id="step-2-register-execution-types"><span id="step-2"></span>Step 2: Register execution types<a class="headerlink" href="#step-2-register-execution-types" title="Permalink to this heading">¶</a></h3>
<p>We then register execution types for all steps in the ML workflow. In this example, we will register an <code class="docutils literal notranslate"><span class="pre">ExecutionType</span></code> for
trainer.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">trainer_type</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ExecutionType</span><span class="p">()</span>
<span class="n">trainer_type</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Trainer&quot;</span>
<span class="n">trainer_type</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">STRING</span>
<span class="n">trainer_type_id</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_execution_type</span><span class="p">(</span><span class="n">trainer_type</span><span class="p">)</span>
</code></pre></div>
</div>
<p>You can query a registered <code class="docutils literal notranslate"><span class="pre">ExecutionType</span></code> with the returned <code class="docutils literal notranslate"><span class="pre">id</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">registered_type</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_execution_types_by_id</span><span class="p">([</span><span class="n">trainer_type_id</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">registered_type</span><span class="p">)</span>
</code></pre></div>
</div>
<p>And you should see output like below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>id: 12
name: &quot;Trainer&quot;
properties {
key: &quot;state&quot;
value: STRING
}
</code></pre></div>
</div>
<h3 id="step-3-create-dataset-artifact"><span id="step-3"></span>Step 3: Create dataset artifact<a class="headerlink" href="#step-3-create-dataset-artifact" title="Permalink to this heading">¶</a></h3>
<p>Next, we create the dataset artifact using the Dataset <code class="docutils literal notranslate"><span class="pre">ArtifactType</span></code> we registered in <a class="reference internal" href="#step-1"><span class="std std-ref">Step 1: Register artifact types</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">data_artifact</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Artifact</span><span class="p">()</span>
<span class="n">data_artifact</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;path/to/data&#39;</span>
<span class="n">data_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;day&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">int_value</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">data_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;split&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="s1">&#39;train&#39;</span>
</code></pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">id</span></code> to specify that this <code class="docutils literal notranslate"><span class="pre">data_artifact</span></code> is in <code class="docutils literal notranslate"><span class="pre">Dataset</span></code> artifact type:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">data_artifact</span><span class="o">.</span><span class="n">type_id</span> <span class="o">=</span> <span class="n">data_type_id</span>
<span class="p">[</span><span class="n">data_artifact_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_artifacts</span><span class="p">([</span><span class="n">data_artifact</span><span class="p">])</span>
</code></pre></div>
</div>
<p>You can see your registered dataset artifact by querying all registered <code class="docutils literal notranslate"><span class="pre">Artifact</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">artifacts</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifacts</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="n">artifacts</span><span class="p">)</span>
</code></pre></div>
</div>
<p>You should see outputs like below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>[id: 1
type_id: 10
uri: &quot;path/to/data&quot;
properties {
key: &quot;day&quot;
value {
    int_value: 1
}
}
properties {
key: &quot;split&quot;
value {
    string_value: &quot;train&quot;
}
}
create_time_since_epoch: 1675758739631
last_update_time_since_epoch: 1675758739631
]
</code></pre></div>
</div>
<p>Plus, there are many ways to query the same <code class="docutils literal notranslate"><span class="pre">Artifact</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="p">[</span><span class="n">stored_data_artifact</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_id</span><span class="p">([</span><span class="n">data_artifact_id</span><span class="p">])</span>
<span class="n">artifacts_with_uri</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_uri</span><span class="p">(</span><span class="n">data_artifact</span><span class="o">.</span><span class="n">uri</span><span class="p">)</span>
<span class="n">artifacts_with_conditions</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifacts</span><span class="p">(</span>
    <span class="n">list_options</span><span class="o">=</span><span class="n">mlmd</span><span class="o">.</span><span class="n">ListOptions</span><span class="p">(</span>
        <span class="n">filter_query</span><span class="o">=</span><span class="s1">&#39;uri LIKE &quot;%/data&quot; AND properties.day.int_value &gt; 0&#39;</span><span class="p">))</span>
</code></pre></div>
</div>
<h3 id="step-4-create-execution-for-trainer"><span id="step-4"></span>Step 4: Create execution for trainer<a class="headerlink" href="#step-4-create-execution-for-trainer" title="Permalink to this heading">¶</a></h3>
<p>We then create an <code class="docutils literal notranslate"><span class="pre">Execution</span></code> of the trainer run, using the Trainer <code class="docutils literal notranslate"><span class="pre">ExecutionType</span></code> we registered in <a class="reference internal" href="#step-2"><span class="std std-ref">Step 2: Register execution types</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">trainer_run</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Execution</span><span class="p">()</span>
</code></pre></div>
</div>
<p>Similary, use <code class="docutils literal notranslate"><span class="pre">id</span></code> to specify that this <code class="docutils literal notranslate"><span class="pre">Execution</span></code> is in <code class="docutils literal notranslate"><span class="pre">Trainer</span></code> execution type.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">trainer_run</span><span class="o">.</span><span class="n">type_id</span> <span class="o">=</span> <span class="n">trainer_type_id</span>
</code></pre></div>
</div>
<p>And mark its status as “Running”:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">trainer_run</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="s2">&quot;RUNNING&quot;</span>
<span class="p">[</span><span class="n">run_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_executions</span><span class="p">([</span><span class="n">trainer_run</span><span class="p">])</span>
</code></pre></div>
</div>
<p>You can see this execution by querying all registered <code class="docutils literal notranslate"><span class="pre">Execution</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">executions</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_executions_by_id</span><span class="p">([</span><span class="n">run_id</span><span class="p">])</span>
<span class="nb">print</span><span class="p">(</span><span class="n">executions</span><span class="p">)</span>
</code></pre></div>
</div>
<p>And you should see output like below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>[id: 1
type_id: 12
properties {
key: &quot;state&quot;
value {
    string_value: &quot;RUNNING&quot;
}
}
create_time_since_epoch: 1675758962852
last_update_time_since_epoch: 1675758962852
]
</code></pre></div>
</div>
<p>Similarly, the same execution can be queried with conditions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">executions_with_conditions</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_executions</span><span class="p">(</span>
    <span class="n">list_options</span> <span class="o">=</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">ListOptions</span><span class="p">(</span>
        <span class="n">filter_query</span><span class="o">=</span><span class="s1">&#39;type = &quot;Trainer&quot; AND properties.state.string_value IS NOT NULL&#39;</span><span class="p">))</span>
</code></pre></div>
</div>
<h3 id="step-5-read-dataset-and-record-input-event"><span id="step-5"></span>Step 5: Read Dataset and record input event<a class="headerlink" href="#step-5-read-dataset-and-record-input-event" title="Permalink to this heading">¶</a></h3>
<p>Now, it’s time to define the input <code class="docutils literal notranslate"><span class="pre">Event</span></code> and read the data.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">input_event</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
<span class="n">input_event</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">DECLARED_INPUT</span>
</code></pre></div>
</div>
<p>Read the input data by specifying the <code class="docutils literal notranslate"><span class="pre">input_event.artifact_id</span></code> as the id of the dataset artifact we created <a class="reference internal" href="#step-3"><span class="std std-ref">Step 3: Create dataset artifact</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">input_event</span><span class="o">.</span><span class="n">artifact_id</span> <span class="o">=</span> <span class="n">data_artifact_id</span>
</code></pre></div>
</div>
<p>Specify that this dataset artifact would be used as the input of the trainer execution using the id of the <code class="docutils literal notranslate"><span class="pre">Execution</span></code> we
created for trainer run in <a class="reference internal" href="#step-4"><span class="std std-ref">Step 4: Create execution for trainer</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">input_event</span><span class="o">.</span><span class="n">execution_id</span> <span class="o">=</span> <span class="n">run_id</span>
</code></pre></div>
</div>
<p>Finally, record this input <code class="docutils literal notranslate"><span class="pre">Event</span></code> in the metadata store.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">store</span><span class="o">.</span><span class="n">put_events</span><span class="p">([</span><span class="n">input_event</span><span class="p">])</span>
</code></pre></div>
</div>
<h3 id="step-6-train-model-and-create-saved-model-artifact"><span id="step-6"></span>Step 6: Train model and create saved model artifact<a class="headerlink" href="#step-6-train-model-and-create-saved-model-artifact" title="Permalink to this heading">¶</a></h3>
<p>Next, we declare the output <code class="docutils literal notranslate"><span class="pre">Artifact</span></code>, which is the saved model, using the <code class="docutils literal notranslate"><span class="pre">SavedModel</span></code> artifact type we created in
<a class="reference internal" href="#step-1"><span class="std std-ref">Step 1: Register artifact types</span></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">model_artifact</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Artifact</span><span class="p">()</span>
<span class="n">model_artifact</span><span class="o">.</span><span class="n">uri</span> <span class="o">=</span> <span class="s1">&#39;path/to/model/file&#39;</span>
<span class="n">model_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;version&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">int_value</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">model_artifact</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="s1">&#39;MNIST-v1&#39;</span>
<span class="n">model_artifact</span><span class="o">.</span><span class="n">type_id</span> <span class="o">=</span> <span class="n">model_type_id</span>
<span class="p">[</span><span class="n">model_artifact_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_artifacts</span><span class="p">([</span><span class="n">model_artifact</span><span class="p">])</span>
</code></pre></div>
</div>
<h3 id="step-7-write-saved-model-and-record-output-event"><span id="step-7"></span>Step 7: Write saved model and record output event<a class="headerlink" href="#step-7-write-saved-model-and-record-output-event" title="Permalink to this heading">¶</a></h3>
<p>Now, it’s time to declare the output <code class="docutils literal notranslate"><span class="pre">Event</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">output_event</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Event</span><span class="p">()</span>
<span class="n">output_event</span><span class="o">.</span><span class="n">type</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Event</span><span class="o">.</span><span class="n">DECLARED_OUTPUT</span>
</code></pre></div>
</div>
<p>The output in this workflow would be the saved model. So we use the id of saved model <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> we created in <a class="reference internal" href="#step-6"><span class="std std-ref">Step 6: Train model and create saved model artifact</span></a>
to specify.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">output_event</span><span class="o">.</span><span class="n">artifact_id</span> <span class="o">=</span> <span class="n">model_artifact_id</span>
</code></pre></div>
</div>
<p>Similar to the input event, we need to specify that this saved model artifact would be the output of the trainer execution.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">output_event</span><span class="o">.</span><span class="n">execution_id</span> <span class="o">=</span> <span class="n">run_id</span>
</code></pre></div>
</div>
<p>Finally, submit this output <code class="docutils literal notranslate"><span class="pre">Event</span></code> to the Metadata Store.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">store</span><span class="o">.</span><span class="n">put_events</span><span class="p">([</span><span class="n">output_event</span><span class="p">])</span>
</code></pre></div>
</div>
<h3 id="step-8-mark-execution-completed"><span id="step-8"></span>Step 8: Mark execution completed<a class="headerlink" href="#step-8-mark-execution-completed" title="Permalink to this heading">¶</a></h3>
<p>We can now mark the execution as completed.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">trainer_run</span><span class="o">.</span><span class="n">id</span> <span class="o">=</span> <span class="n">run_id</span>
<span class="n">trainer_run</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;state&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="s2">&quot;COMPLETED&quot;</span>
<span class="n">store</span><span class="o">.</span><span class="n">put_executions</span><span class="p">([</span><span class="n">trainer_run</span><span class="p">])</span>
</code></pre></div>
</div>
<h3 id="step-9-annote-the-experiment-with-a-context"><span id="step-9"></span>Step 9: Annote the experiment with a context<a class="headerlink" href="#step-9-annote-the-experiment-with-a-context" title="Permalink to this heading">¶</a></h3>
<p>Finally, we group artifacts and executions under a <code class="docutils literal notranslate"><span class="pre">Context</span></code> using <code class="docutils literal notranslate"><span class="pre">Attribution</span></code> and <code class="docutils literal notranslate"><span class="pre">Association</span></code>.</p>
<p>Register a <code class="docutils literal notranslate"><span class="pre">ContextType</span></code> first.</p>
<div class="important admonition">
<p class="admonition-title">Important</p>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> of the <code class="docutils literal notranslate"><span class="pre">ContextType</span></code> must be unique.</p>
</div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">experiment_type</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">ContextType</span><span class="p">()</span>
<span class="n">experiment_type</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Experiment&quot;</span>
<span class="n">experiment_type</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;note&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">STRING</span>
<span class="n">experiment_type_id</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_context_type</span><span class="p">(</span><span class="n">experiment_type</span><span class="p">)</span>
</code></pre></div>
</div>
<p>Create a <code class="docutils literal notranslate"><span class="pre">Context</span></code> using the <code class="docutils literal notranslate"><span class="pre">ContextType</span></code> we just registered.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">my_experiment</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Context</span><span class="p">()</span>
<span class="n">my_experiment</span><span class="o">.</span><span class="n">type_id</span> <span class="o">=</span> <span class="n">experiment_type_id</span>
<span class="n">my_experiment</span><span class="o">.</span><span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;exp1&quot;</span>
<span class="n">my_experiment</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;note&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">string_value</span> <span class="o">=</span> <span class="s2">&quot;My first experiment.&quot;</span>
<span class="p">[</span><span class="n">experiment_id</span><span class="p">]</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">put_contexts</span><span class="p">([</span><span class="n">my_experiment</span><span class="p">])</span>
</code></pre></div>
</div>
<p>Group the model <code class="docutils literal notranslate"><span class="pre">Artifact</span></code> to this experiment <code class="docutils literal notranslate"><span class="pre">Context</span></code> using <code class="docutils literal notranslate"><span class="pre">Attribution</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">attribution</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Attribution</span><span class="p">()</span>
<span class="n">attribution</span><span class="o">.</span><span class="n">artifact_id</span> <span class="o">=</span> <span class="n">model_artifact_id</span>
<span class="n">attribution</span><span class="o">.</span><span class="n">context_id</span> <span class="o">=</span> <span class="n">experiment_id</span>
</code></pre></div>
</div>
<p>Group the trainer <code class="docutils literal notranslate"><span class="pre">Execution</span></code> to this experiment <code class="docutils literal notranslate"><span class="pre">Context</span></code> using <code class="docutils literal notranslate"><span class="pre">Association</span></code>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">association</span> <span class="o">=</span> <span class="n">metadata_store_pb2</span><span class="o">.</span><span class="n">Association</span><span class="p">()</span>
<span class="n">association</span><span class="o">.</span><span class="n">execution_id</span> <span class="o">=</span> <span class="n">run_id</span>
<span class="n">association</span><span class="o">.</span><span class="n">context_id</span> <span class="o">=</span> <span class="n">experiment_id</span>
</code></pre></div>
</div>
<p>Submit this <code class="docutils literal notranslate"><span class="pre">Context</span></code> to Metadata Store.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">store</span><span class="o">.</span><span class="n">put_attributions_and_associations</span><span class="p">([</span><span class="n">attribution</span><span class="p">],</span> <span class="p">[</span><span class="n">association</span><span class="p">])</span>
</code></pre></div>
</div>
<p>You may confirm your previous works by querying the artifacts and executions that are linked to the experiment context.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">experiment_artifacts</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifacts_by_context</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">)</span>
<span class="n">experiment_executions</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_executions_by_context</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">)</span>
</code></pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">experiment_artifacts</span></code> should be like below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>[id: 2
type_id: 11
uri: &quot;path/to/model/file&quot;
properties {
key: &quot;name&quot;
value {
    string_value: &quot;MNIST-v1&quot;
}
}
properties {
key: &quot;version&quot;
value {
    int_value: 1
}
}
create_time_since_epoch: 1675759027103
last_update_time_since_epoch: 1675759027103
]
</code></pre></div>
</div>
<p>And the <code class="docutils literal notranslate"><span class="pre">experiment_executions</span></code> should be like below:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span><code>[id: 1
type_id: 12
properties {
key: &quot;state&quot;
value {
    string_value: &quot;COMPLETED&quot;
}
}
create_time_since_epoch: 1675758962852
last_update_time_since_epoch: 1675759074438
]
</code></pre></div>
</div>
<p>You can also use neighborhood queries to fetch these artifacts and executions with conditions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><code><span class="n">experiment_artifacts_with_conditions</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_artifacts</span><span class="p">(</span>
    <span class="n">list_options</span> <span class="o">=</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">ListOptions</span><span class="p">(</span>
        <span class="n">filter_query</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;contexts_a.type = &quot;Experiment&quot; AND contexts_a.name = &quot;exp1&quot;&#39;</span><span class="p">)))</span>
<span class="n">experiment_executions_with_conditions</span> <span class="o">=</span> <span class="n">store</span><span class="o">.</span><span class="n">get_executions</span><span class="p">(</span>
    <span class="n">list_options</span> <span class="o">=</span> <span class="n">mlmd</span><span class="o">.</span><span class="n">ListOptions</span><span class="p">(</span>
        <span class="n">filter_query</span><span class="o">=</span><span class="p">(</span><span class="s1">&#39;contexts_a.id = </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">experiment_id</span><span class="p">))))</span>
</code></pre></div>
</div>
<div class="seealso admonition">
<p class="admonition-title">See also</p>
<p><a class="reference external" href="https://github.com/google/ml-metadata">Github repo for google/ml-metadata</a>
<a class="reference external" href="https://www.tensorflow.org/tfx/ml_metadata/api_docs/python/mlmd">MLMD API documentation</a></p>
</div>






                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="spark.html" class="md-footer__link md-footer__link--prev" aria-label="Previous: Spark" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Spark
            </div>
          </div>
        </a>
      
      
        
        <a href="mlflow.html" class="md-footer__link md-footer__link--next" aria-label="Next: MLFlow" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              MLFlow
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  
  
  <div class="md-footer-meta md-typeset">
    
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-footer-copyright__highlight">
        &#169; Copyright 2023, Elements of AI.
        
    </div>
  
    Created using
    <a href="https://www.sphinx-doc.org/" target="_blank" rel="noopener">Sphinx</a>
    6.1.3.
     and
    <a href="https://github.com/jbms/sphinx-immaterial/" target="_blank" rel="noopener">Sphinx-Immaterial</a>
  
</div>
      
    </div>
    
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.expand", "navigation.sections", "navigation.top", "search.share"], "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
      
        <script src="../_static/sphinx_immaterial_theme.cea6a0c1d5b0618cf.min.js"></script>
    
  </body>
</html>